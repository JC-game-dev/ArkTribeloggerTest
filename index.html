<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>NodeTest</title>
</head>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<body>

<div class="container">
    <h1 class="mt-4">Ark Tribelogger</h1>

    <form action="/submit-form" method="post" id="notificationForm">
        <div class="form-group">
            <label for="streamLink">URL:</label>
            <input type="text" class="form-control" id="streamLink" name="streamLinkInput" placeholder="https://www.youtube.com/watch?v=ydYDqZQpim8">
        </div>

        <div id="items" class="mt-3">
            <h3>Items:</h3>
        </div>

        <button type="button" class="btn btn-primary" id="addItem">Add Listener Slot</button>

        <br/>

        <input type="submit" class="btn btn-success mt-3" value="Create">
    </form>
</div>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script>
    document.getElementById('addItem').addEventListener('click', function() {
        const itemsDiv = document.getElementById('items');
        const newItem = document.createElement('div');

        createDynamicForm();
    });

    function createDynamicForm() {
        // Create a container div for the dynamic form instance
        const formInstance = document.createElement("div");

        // Generate unique IDs for the form and its elements
        const formId = "dynamicForm_" + new Date().getTime();
        const typeSelectId = formId + "_type";
        const destroyedOptionsDivId = formId + "_destroyedOptions";
        const destroyedOptionsSelectId = formId + "_destroyedOptionsSelect";
        const dinonameInputId = formId + "_dinoname";
        const structuresAmountInputID = formId + "_structuresAmount";
        const killedAmountInputID = formId + "_killedAmount";

        // Create the "Type" label and select element
        const typeLabel = document.createElement("label");
        typeLabel.setAttribute("for", typeSelectId);
        typeLabel.textContent = "Type";
        formInstance.appendChild(typeLabel);

        const typeSelect = document.createElement("select");
        typeSelect.setAttribute("id", typeSelectId);
        typeSelect.setAttribute("name", "type");
        formInstance.appendChild(typeSelect);

        // Create the "wasDestroyed" option
        const wasDestroyedOption = document.createElement("option");
        wasDestroyedOption.setAttribute("value", "wasDestroyed");
        wasDestroyedOption.textContent = "was destroyed";
        typeSelect.appendChild(wasDestroyedOption);

        // Create the "wasKilled" option
        const wasKilledOption = document.createElement("option");
        wasKilledOption.setAttribute("value", "wasKilled");
        wasKilledOption.textContent = "was killed";
        typeSelect.appendChild(wasKilledOption);

        // Create the "wasDestroyed" option details
        const destroyedOptionsDiv = document.createElement("div");
        destroyedOptionsDiv.setAttribute("id", destroyedOptionsDivId);
        destroyedOptionsDiv.style.display = "none";
        formInstance.appendChild(destroyedOptionsDiv);

        const destroyedOptionsLabel = document.createElement("label");
        destroyedOptionsLabel.setAttribute("for", destroyedOptionsSelectId);
        destroyedOptionsLabel.textContent = "Structure";
        destroyedOptionsDiv.appendChild(destroyedOptionsLabel);

        const destroyedOptionsSelect = document.createElement("select");
        destroyedOptionsSelect.setAttribute("id", destroyedOptionsSelectId);
        destroyedOptionsSelect.setAttribute("name", "destroyedoptions");
        destroyedOptionsDiv.appendChild(destroyedOptionsSelect);

        // Create the "Metal Foundation" option
        const metalFoundationOption = document.createElement("option");
        metalFoundationOption.setAttribute("value", "Metal Foundation");
        metalFoundationOption.textContent = "Metal Foundation";
        destroyedOptionsSelect.appendChild(metalFoundationOption);

        // Create the "Stone Foundation" option
        const stoneFoundationOption = document.createElement("option");
        stoneFoundationOption.setAttribute("value", "Stone Foundation");
        stoneFoundationOption.textContent = "Stone Foundation";
        destroyedOptionsSelect.appendChild(stoneFoundationOption);

        const structuresAmountLabel = document.createElement("label");
        structuresAmountLabel.setAttribute("for", structuresAmountInputID);
        structuresAmountLabel.textContent = "Alert Amount";
        destroyedOptionsDiv.appendChild(structuresAmountLabel);

        const structuresAmountInput = document.createElement("input");
        structuresAmountInput.setAttribute("type", "text");
        structuresAmountInput.setAttribute("id", structuresAmountInputID);
        structuresAmountInput.setAttribute("name", "dinoName");
        destroyedOptionsDiv.appendChild(structuresAmountInput);

        // Create the "wasKilled" option details
        const wasKilledOptionDiv = document.createElement("div");
        wasKilledOptionDiv.style.display = "none";
        formInstance.appendChild(wasKilledOptionDiv);

        const dinoNameLabel = document.createElement("label");
        dinoNameLabel.setAttribute("for", dinonameInputId);
        dinoNameLabel.textContent = "Name of Dino";
        wasKilledOptionDiv.appendChild(dinoNameLabel);

        const dinoNameInput = document.createElement("input");
        dinoNameInput.setAttribute("type", "text");
        dinoNameInput.setAttribute("id", dinonameInputId);
        dinoNameInput.setAttribute("name", "dinoName");
        wasKilledOptionDiv.appendChild(dinoNameInput);

        const dinoAmountLabel = document.createElement("label");
        dinoAmountLabel.setAttribute("for", killedAmountInputID);
        dinoAmountLabel.textContent = "Alert Amount";
        wasKilledOptionDiv.appendChild(dinoAmountLabel);

        const dinoAmountInput = document.createElement("input");
        dinoAmountInput.setAttribute("type", "text");
        dinoAmountInput.setAttribute("id", killedAmountInputID);
        dinoAmountInput.setAttribute("name", "dinoName");
        wasKilledOptionDiv.appendChild(dinoAmountInput);

        // Append the formInstance to your target HTML element (e.g., a form or a div)
        const targetElement = document.getElementById("items");
        targetElement.appendChild(formInstance);

        typeSelect.addEventListener("change", function () {
            const selectedValue = typeSelect.value;
            destroyedOptionsDiv.style.display = "none";
            wasKilledOptionDiv.style.display = "none";
            if (selectedValue === "wasDestroyed") {
                destroyedOptionsDiv.style.display = "block";
            } else if (selectedValue === "wasKilled") {
                wasKilledOptionDiv.style.display = "block";
            }
        });
    }
</script>

</body>
</html>